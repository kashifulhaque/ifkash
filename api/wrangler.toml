# ./api/wrangler.toml

name = "ifkash-api"                 # avoid colliding with your Pages project name
main = "build/worker/shim.mjs"      # preferred output of worker-build (see note below)
compatibility_date = "2025-10-01"
workers_dev = true                   # gives you a preview *.workers.dev URL too
observability = { enabled = true }

[build]
command = "cargo install -q worker-build && worker-build --release"
watch_dir = "src"

# Route only /api/* on your domain to this Worker.
# Ensure your domain is a Cloudflare zone in your account.
[[routes]]
pattern = "ifkash.dev/api/*"
zone_name = "ifkash.dev"

[[kv_namespaces]]
binding = "IFKASH_HN"
id = "85ed35403df24a01942b9ed8d3bbf3f4"

[[d1_databases]]
binding = "IFKASH_D1"
database_name = "ifkash"
database_id = "b84c4a60-0130-4784-a638-17e529ae5ab3"

[vars]
POCKETBASE_URL = "https://pb.ifkash.dev"

# To set the PocketBase credentials, run:
# wrangler secret put POCKETBASE_EMAIL
# wrangler secret put POCKETBASE_PASSWORD
